<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hello</title>
        <link rel="stylesheet" href="/b/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="/b/bootstrap/dist/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="/b/animate.css/animate.min.css">
        <link rel="stylesheet" href="/css/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
    </head>
    <body>
      <div id="fb-root"></div>
      <script>
      window.fbAsyncInit = function() {

        // test account for jay, works on localhost:5000
        var fbAppId = "756437764450452"

        FB.init({
          appId      : fbAppId,
          xfbml      : true,
          version    : 'v2.2',
          status     : true
        });

        FB.getLoginStatus(function(response){
          // FB logged in and this app has permissions
          if (response.status === "connected") {
            window.userId = response.authResponse.userID;

            // Get user information
            // OK so this is what we'll do with server after the frontend part is cleared.
            /*if(window.userId) {
              var xhr = new XMLHttpRequest();
              xhr.open("GET", "/api/user/"+window.userId, false);
              xhr.send();
              var response = JSON.parse(xhr.response);
              //window.user = response[0].user;
            } */

          // not a user or not authenticated with the app
          } else {
            window.userId = false;
            //console.log(response);
          }
        });
      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <div id="loading">
      Loading...
    </div>
    <div id="app" class="hidden">
      <div id="alert" class="hidden">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <div id="alertMessage" class="alert alert-danger alert-dismissible" role="alert"></div>
      </div>
      <a href="#/" class="btn" style="border: 1px solid #000; color: #fff; background-color: #999;">
        Front page
      </a>
      <a href="#/you" class="btn" style="border: 1px solid #000; color: #fff; background-color: #999;">
        Some other page
      </a>
      <a href="#/admin" class="btn" style="border: 1px solid #000; color: #fff; background-color: #999;">
        Admin
      </a>
      <br /><br />
      <div id="frontPage" style="height: 100px;" class="hidden">
        Front page div visible
      </div>
      <div id="otherPage"  style="height: 100px;" class="hidden">
        Other page div visible
      </div>
      <div id="admin"  style="height: 100px; text-align: center;" class="hidden">
        <a href="/auth/facebook" id='fbLogin' type='button' class='btn hidden' style="background: #3b55a0; color: #fff;  width: 50%; height: 60px; padding-top: 20px; margin-top: 20px; margin-bottom: 20px;">
          <img style="margin-top: -4px; margin-right: 15px;" class="" src="/img/fb.png" />
          Logi sisse Facebookiga<br />
        </a>
        <div id="userInfo" class="hidden">
          userId: <span id="userIdShow"></span><br />
          <a onclick="window.userId; FB.logout();" href="/logout">Log out</a>
        </div>
      </div>

      <div id="log">
      </div>
    </div>

    <script src="/b/js-signals/dist/signals.min.js"></script>
    <script src="/b/hasher/dist/js/hasher.min.js"></script>
    <script src="/b/crossroads/dist/crossroads.min.js"></script>
    <script src="/b/jquery/dist/jquery.min.js"></script>
    <script src="/b/html5shiv/dist/html5shiv.js"></script>
    <script src="/b/respond/dest/respond.min.js"></script>
    <script src="/b/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/b/momentjs/min/moment.min.js"></script>
    <script src="/js/jay.js"></script>
    <script src="/js/script.js"></script>
  </body>
</html>
