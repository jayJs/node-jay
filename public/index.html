<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hello</title>
        <link rel="stylesheet" href="/b/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="/b/bootstrap/dist/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="/b/animate.css/animate.min.css">
        <link rel="stylesheet" href="/css/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
    </head>
    <body>
      <div id="fb-root"></div>
      <script>
      window.fbAsyncInit = function() {

        // test account for j, works on localhost:5000
        var fbAppId = "756437764450452"

        FB.init({
          appId      : fbAppId,
          xfbml      : true,
          version    : 'v2.2',
          status     : true
        });

        FB.getLoginStatus(function(response){
          if (response.status === "connected") {
            window.userId = response.authResponse.userID;
            document.getElementById("login").className = "animated fadeOut hidden";
            document.getElementById("loading").className = "animated fadeOut hidden";
            document.getElementById("app").className = "animated fadeIn";

            // Get user information
            if(window.userId) {
              var xhr = new XMLHttpRequest();
              xhr.open("GET", "/api/user/"+window.userId, false);
              xhr.send();
              var json = JSON.parse(xhr.response);
              window.companies = json[0].companies;
              window.selectedCompany = json[0].selectedCompany;
              window.userName = json[0].username;
            }

          } else {
            document.getElementById("login").className = "animeted fadeIn";
            console.log(response);
          }
        });

      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <div id="loading">
          Loading...
        </div>
        <div id="app" class="hidden">
          <a href="#/" class="btn" style="border: 1px solid #000; color: #fff; background-color: #999;">
            Front page
          </a>
          <a href="#/you" class="btn" style="border: 1px solid #000; color: #fff; background-color: #999;">
            Some other page
          </a>
          <br /><br />
          <p id="frontPage" class="hidden">
            Front page div visible
          </p>
          <p id="otherPage" class="hidden">
            Other page div visible
          </p>

          <p id="log" style="border-top: #999 1px solid;">
          </p>

        </div>
        <script src="/b/js-signals/dist/signals.min.js"></script>
        <script src="/b/hasher/dist/js/hasher.min.js"></script>
        <script src="/b/crossroads/dist/crossroads.min.js"></script>
        <script src="/b/jquery/dist/jquery.min.js"></script>
        <script src="/b/html5shiv/dist/html5shiv.js"></script>
        <script src="/b/respond/dest/respond.min.js"></script>
        <script src="/b/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="/b/momentjs/min/moment.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
